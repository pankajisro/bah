<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OpenLayers Layer Toggle</title>
    <style>
        #map {
            width: 100%;
            height: 400px;
        }
        .layer-toggle {
            position: absolute;
            top: 10px;
            left: 10px;
            background: white;
            padding: 10px;
            border-radius: 5px;
        }
        .layer-toggle input {
            margin-right: 5px;
        }
    </style>
    <script src="https://cdn.jsdelivr.net/npm/ol"></script>
</head>
<body>
    <div id="map" class="map"></div>
    <div class="layer-toggle">
        <div>
            <input type="checkbox" id="national_highway" checked>
            <label for="national_highway">National Highway</label>
        </div>
        <div>
            <input type="checkbox" id="railway_tracks" checked>
            <label for="railway_tracks">Railway Tracks</label>
        </div>
        <div>
            <input type="checkbox" id="railway_stations" checked>
            <label for="railway_stations">Railway Stations</label>
        </div>
        <div>
            <input type="checkbox" id="airports" checked>
            <label for="airports">Airports</label>
        </div>
    </div>

    <script>
        const version = "1.1.1"; // Set the version you want

        const layersConfig = {
            national_highway: {
                displayName: "National Highway",
                id: "national_highway",
                isShow: true,
                type: "imageWMS",
                layerFactoryParams: {
                    urlTemplate: "https://vedas.sac.gov.in/geoserver/vedas/wms",
                    layerParams: {
                        LAYERS: "vedas:INDIA_NHROADS",
                        VERSION: version,
                    },
                    format: "png",
                },
                layer: "",
                zIndex: 0,
                baseIndex: 150,
            },
            railway_tracks: {
                displayName: "Railway Tracks",
                id: "railway_tracks",
                isShow: true,
                type: "imageWMS",
                layerFactoryParams: {
                    urlTemplate: "https://vedas.sac.gov.in/geoserver/vedas/wms",
                    layerParams: {
                        LAYERS: "vedas:INDIA_RLWY_TRACKS",
                        VERSION: version,
                    },
                    format: "png",
                },
                layer: "",
                zIndex: 0,
                baseIndex: 150,
            },
            railway_stations: {
                displayName: "Railway Stations",
                id: "railway_stations",
                isShow: true,
                type: "imageWMS",
                layerFactoryParams: {
                    urlTemplate: "https://vedas.sac.gov.in/geoserver/vedas/wms",
                    layerParams: {
                        LAYERS: "vedas:INDIA_RLWY_STATIONS",
                        VERSION: version,
                    },
                    format: "png",
                },
                layer: "",
                zIndex: 0,
                baseIndex: 150,
            },
            airports: {
                displayName: "Airports",
                id: "airports",
                isShow: true,
                type: "imageWMS",
                layerFactoryParams: {
                    urlTemplate: "https://vedas.sac.gov.in/geoserver/vedas/wms",
                    layerParams: {
                        LAYERS: "vedas:INDIA_AIRPORTS",
                        VERSION: version,
                    },
                    format: "png",
                },
                layer: "",
                zIndex: 0,
                baseIndex: 150,
            },
        };

        const layers = {};

        for (const key in layersConfig) {
            const config = layersConfig[key];
            layers[key] = new ol.layer.Image({
                source: new ol.source.ImageWMS({
                    url: config.layerFactoryParams.urlTemplate,
                    params: config.layerFactoryParams.layerParams,
                    serverType: 'geoserver',
                }),
                visible: config.isShow,
                zIndex: config.baseIndex,
            });
        }

        const map = new ol.Map({
            target: 'map',
            layers: [
                new ol.layer.Tile({
                    source: new ol.source.OSM(),
                }),
                ...Object.values(layers)
            ],
            view: new ol.View({
                center: ol.proj.fromLonLat([78.9629, 20.5937]), // Centered on India
                zoom: 5,
            }),
        });

        document.querySelectorAll('.layer-toggle input').forEach(input => {
            input.addEventListener('change', function() {
                const layerKey = this.id;
                layers[layerKey].setVisible(this.checked);
            });
        });
    </script>
</body>
</html>
